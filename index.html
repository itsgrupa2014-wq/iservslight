
<!DOCTYPE html>
<html lang="lv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Infoservs — Lineārais gaismeklis (konfigurators)</title>
  <link rel="stylesheet" href="styles.css"tājs) -->
  https://unpkg.com/three@0.159.0/build/three.min.js</script>

  <!-- Cenu/jaudas loģika -->
  pricing.js</script>

  <!-- Mini RAL fallback (mazā karte) -->
  <script srcjs</script>

  <!-- Galvenais skripts -->
  main.js</script>
</head>
<body>
  <header class="top">
    <h1>Lineārie LED gaismekļi — konfigurators</h1>
    <p>230V ar iebūvētu pārveidotāju · Garumi: 600 / 1200 / 1800 / 2400 / 3000 · CCT: 3000K / 4000K</p>
  </header>

  <main class="wrap">
    <!-- WebGL skatītājs -->
    <section class="viewer-wrap">
      <canvas id="viewer"></canvas>
    </section>

    <!-- Vadības panelis -->
    <section class="panel">
      <h2>Konfigurācija</h2>

      <div class="row">
        <label>Garums</label>
        <div class="options" id="lengths">
          <button data-l="600">600 mm</button>
          <button data-l="1200" class="active">1200 mm</button>
          <button data-l="1800">1800 mm</button>
          <button data-l="2400">2400 mm</button>
          <button data-l="3000">3000 mm</button>
        </div>
      </div>

      <div class="row">
        <label>CCT (Krāsas temperatūra)</label>
        <div class="options" id="cct">
          <label class="opt"><input type="radio" name="cct" value="3000" checked> 3000K</label>
          <label class="opt"><input type="radio" name="cct" value="4000"> 4000K</label>
        </div>
      </div>

      <div class="row">
        <label>Vadība</label>
        <div class="options">
          <label class="opt"><input type="checkbox" id="dali"> DALI</label>
          <span class="note">Pagaidām bez piemaksas</span>
        </div>
      </div>

      <div class="row">
        <label>Montāža</label>
        <div class="options">
          <label class="opt"><input type="checkbox" id="suspend"> Ar trosītēm (piekare)</label>
        </div>
      </div>

      <div class="row">
        <label>Korpusa krāsa (RAL)</label>
        <div class="options">
          <!-- Ātrās pogas -->
          <button class="ral-btn" data-ral="RAL9003" style="background:#F5F5F5;color:#111;">RAL9003</button>
          <button class="ral-btn" data-ral="RAL9005" style="background:#0A0A0A;">RAL9005</button>
          <button class="ral-btn" data-ral="ANODIZED" style="background:#B0B0B0;color:#111;">ANODIZED</button>
          <!-- Manuāla ievade + auto-complete -->
          <input type="text" id="ralInput" placeholder="Ievadi RAL, piem. RAL9010" />
        </div>
        <div id="ralList" class="options"></div>
        <div class="note">Ekrānā redzamās RAL krāsas ir aptuvenas.</div>
      </div>

      <div class="summary">
        <div><strong>Cena (bez PVN):</strong> <span id="price">—</span></div>
        <div><strong>Jauda (apr.):</strong> <span id="power">—</span> W</div>
        <div><strong>SKU:</strong> <span id="sku">—</span></div>
      </div>

      <div class="cta">
        <button id="downloadSpec">Lejupielādēt specifikāciju</button>
        <button class="secondary" id="requestQuote">Pasūtīt ar uzstādīšanu</button>
      </div>
    </section>
  </main>

  <!-- PNG fallback (ja WebGL nestrādā) -->
  <section class="fallback">
    <picture>
      <!-- Ja ieliksi arī .webp, šis source jāpaliek pirmais; citādi droši dzēs -->
      <!-- assets/img/linear_base.webp -->
      <img id="productImg" srcng?v=1
    </picture>
    <div id="assetsCheck" class="note"></div>
  </section>

  <!-- Pilna RAL ielāde (lokāls + CDN) -->
  <script>
    (function loadFullRal() {
      const localUrl = 'assets/data/ral-classic.json';
      const cdnUrl   = 'https://cdn.jsdelivr.net/gh/codebrainz/ral@master/ral-classic.json';
      function setMap(map) { window.RAL_MAP_FULL = map; }

      fetch(localUrl).then(r => {
        if (!r.ok) throw new Error('local RAL missing');
        return r.json();
      }).then(setMap).catch(() => {
        return fetch(cdnUrl).then(r => r.json()).then(setMap).catch(() => {
          console.warn('Pilnais RAL nav pieejams; paliek mini karte.');
        });
      });
    })();
  </script>
</body>
</html>

<script>
  (function loadFullRal() {
    // Lokālais (ja ieliksi failu repo)
    const localUrl = 'assets/data/ral-classic.json';
    // Publisks CDN (rezerves ielāde – strādā uzreiz):
    const cdnUrl   = 'https://cdn.jsdelivr.net/gh/runxel/colorizah@main/ral-classic.json';

    function setMapFromRunxel(json) {
      // runxel/colorizah formāts: { "colorsystem": { "name": "RAL Classic", "colors": [ { "id":"1000","vanityname":"...","hex":"CDBA88" }, ... ] } }
      const arr = json?.colorsystem?.colors || [];
      const map = {};
      for (const c of arr) {
        const code = `RAL${c.id}`;
        const hex  = `#${String(c.hex).trim()}`;
        map[code] = hex;
      }
      window.RAL_MAP_FULL = map;
    }

    fetch(localUrl).then(r => {
      if (!r.ok) throw new Error('local RAL missing');
      return r.json();
    }).then(setMapFromRunxel).catch(() => {
      return fetch(cdnUrl).then(r => r.json()).then(setMapFromRunxel).catch(() => {
        console.warn('Pilnais RAL nav pieejams; paliek mini karte.');
      });
    });
  })();
</script>

